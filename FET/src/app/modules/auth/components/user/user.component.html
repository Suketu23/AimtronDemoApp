<form
  class="user-form"
  [formGroup]="userform"
  (ngSubmit)="createUser(userform.value)"
  novalidate
>
  <table cellspacing="0">
    <tr>
      <td>
        <mat-form-field>
          <input
            matInput
            type="email"
            formControlName="email"
            placeholder="User Email"
            required
          />
          <mat-error>
            <app-error-message
              [control]="userform.controls.email"
            ></app-error-message>
          </mat-error>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field>
          <input
            matInput
            type="password"
            formControlName="password"
            placeholder="Password"
            required
          />
          <mat-error>
            <app-error-message
              [control]="userform.controls.password"
            ></app-error-message>
          </mat-error>
        </mat-form-field>
      </td>
    </tr>
    <tr>
      <td>
        <mat-form-field>
          <mat-select
            formControlName="roleId"
            placeholder="Choose Role"
            required
          >
            <mat-option *ngFor="let role of roleList" [value]="role.id">{{
              role.name
            }}</mat-option>
          </mat-select>
          <mat-error>
            <app-error-message
              [control]="userform.controls.roleId"
            ></app-error-message>
          </mat-error>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field>
          <mat-select
            formControlName="departmentId"
            placeholder="Choose Department"
            required
          >
            <mat-option *ngFor="let dept of departmentList" [value]="dept.id">{{
              dept.name
            }}</mat-option>
          </mat-select>
          <mat-error>
            <app-error-message
              [control]="userform.controls.departmentId"
            ></app-error-message>
          </mat-error>
        </mat-form-field>
      </td>
    </tr>
  </table>

  <button
    mat-raised-button
    class="form-btn btnSubmit"
    color="primary"
    [disabled]="userform.invalid"
  >
    Submit
  </button>
</form>
<br />
<mat-table #table [dataSource]="dataSource" matSort class="mat-cell">
  <ng-container matColumnDef="firstName">
    <mat-header-cell *matHeaderCellDef mat-sort-header
      >First Name</mat-header-cell
    >
    <mat-cell *matCellDef="let row">{{
      row.firstName ? row.firstName : "--"
    }}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="lastName">
    <mat-header-cell *matHeaderCellDef mat-sort-header
      >Last Name</mat-header-cell
    >
    <mat-cell *matCellDef="let row">{{
      row.lastName ? row.lastName : "--"
    }}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="email">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>
    <mat-cell *matCellDef="let row">{{ row.email }}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="phoneNumber">
    <mat-header-cell *matHeaderCellDef mat-sort-header
      >Phone Number</mat-header-cell
    >
    <mat-cell *matCellDef="let row">{{
      row.phoneNumber ? row.phoneNumber : "--"
    }}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="role">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Role</mat-header-cell>
    <mat-cell *matCellDef="let row">{{ row.role }}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="department">
    <mat-header-cell *matHeaderCellDef mat-sort-header
      >Department</mat-header-cell
    >
    <mat-cell *matCellDef="let row">{{ row.department }}</mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
</mat-table>

<div
  class="no-results"
  [style.display]="dataSource && dataSource.length == 0 ? '' : 'none'"
>
  No results
</div>
